<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cocos3d: CC3TouchedNodePicker Interface Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">cocos3d
   &#160;<span id="projectnumber">0.6.3</span>
   </div>
   <div id="projectbrief">Cocos3D API Reference for <a href="http://www.kobold2d.com">Kobold2D</a> developers</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interface_c_c3_touched_node_picker.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">CC3TouchedNodePicker Interface Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CC3TouchedNodePicker" -->
<p><code>#include &lt;CC3World.h&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CC3TouchedNodePicker:</div>
<div class="dyncontent">
<div class="center"><img src="interface_c_c3_touched_node_picker__coll__graph.png" border="0" usemap="#_c_c3_touched_node_picker_coll__map" alt="Collaboration graph"/></div>
<map name="_c_c3_touched_node_picker_coll__map" id="_c_c3_touched_node_picker_coll__map">
<area shape="rect" id="node2" href="interface_c_c3_node.html" title="CC3Node and its subclasses form the basis of all 3D artifacts in the 3D world, including visible mesh..." alt="" coords="85,99,159,127"/><area shape="rect" id="node8" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene." alt="" coords="199,179,277,207"/><area shape="rect" id="node4" href="interface_c_c3_identifiable.html" title="This is a base subclass for any class that uses tags or names to identify individual instances..." alt="" coords="5,6,112,34"/><area shape="rect" id="node6" href="interface_c_c3_g_l_matrix.html" title="A wrapper class for a 4x4 OpenGL matrix array." alt="" coords="137,6,236,34"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="interface_c_c3_touched_node_picker-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#ab508673a7eb031f086af4eb48ddccb18">dispatchPickedNode</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#a3a93a9df33a4d8c344758fc025d06da3">initOnWorld:</a> (<a class="el" href="interface_c_c3_world.html">CC3World</a> *aCC3World)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#a040b6ca1a3ae0d127fef26b6df361494">pickNodeFromTouchEvent:at:</a> (uint tType,[at] CGPoint tPoint)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#ade5bf0d7c783ffbc6467615ff5247960">pickTouchedNode</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#afed04c29fefce5008a2ddb4978eb5abc">handlerOnWorld:</a> (<a class="el" href="interface_c_c3_world.html">CC3World</a> *aCC3World)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd2f0497b54954b031a788df2d349eaf"></a><!-- doxytag: member="CC3TouchedNodePicker::pickedNode" ref="acd2f0497b54954b031a788df2d349eaf" args="" -->
<a class="el" href="interface_c_c3_node.html">CC3Node</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>pickedNode</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0727a881f1e952134e649ec9817396e4"></a><!-- doxytag: member="CC3TouchedNodePicker::queuedTouchCount" ref="a0727a881f1e952134e649ec9817396e4" args="" -->
uint&#160;</td><td class="memItemRight" valign="bottom"><b>queuedTouchCount</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8662d9acee6ad7dd7e597bd00f556d0"></a><!-- doxytag: member="CC3TouchedNodePicker::touchPoint" ref="ae8662d9acee6ad7dd7e597bd00f556d0" args="" -->
CGPoint&#160;</td><td class="memItemRight" valign="bottom"><b>touchPoint</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe608992fec540233b35af6f009fcee5"></a><!-- doxytag: member="CC3TouchedNodePicker::touchQueue" ref="afe608992fec540233b35af6f009fcee5" args="[kCC3TouchQueueLength]" -->
uint&#160;</td><td class="memItemRight" valign="bottom"><b>touchQueue</b> [kCC3TouchQueueLength]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a87b014b887ff1a510886b65026af497d"></a><!-- doxytag: member="CC3TouchedNodePicker::wasPicked" ref="a87b014b887ff1a510886b65026af497d" args="" -->
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>wasPicked</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a19e13a301897698c489d2886e66601f8"></a><!-- doxytag: member="CC3TouchedNodePicker::wasTouched" ref="a19e13a301897698c489d2886e66601f8" args="" -->
BOOL&#160;</td><td class="memItemRight" valign="bottom"><b>wasTouched</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a41b12fb28f59c64f7a5e91061d34c00a"></a><!-- doxytag: member="CC3TouchedNodePicker::world" ref="a41b12fb28f59c64f7a5e91061d34c00a" args="" -->
<a class="el" href="interface_c_c3_world.html">CC3World</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>world</b></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CGPoint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#ac4af5ff92b7071d5518049625b49af97">glTouchPoint</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_c_c3_node_picking_visitor.html">CC3NodePickingVisitor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_touched_node_picker.html#a68b7bb7337a946dbb46921123390e412">pickVisitor</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="interface_c_c3_touched_node_picker.html" title="A CC3TouchedNodePicker instance handles picking nodes from touch events in a CC3World.">CC3TouchedNodePicker</a> instance handles picking nodes from touch events in a <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a>. </p>
<p>This handler maintains a queue of touch types, to ensure than none are missed. However, it does not keep a queue of touch points. Instead, it uses the most recent touch point to determine the 3D object under the touch point.</p>
<p>This handler picks 3D nodes using a color picking algorithm. When a touch event occurs, its type is added to the queue, and the touch position is updated. On the next rendering pass, the 3D scene is rendered so that each 3D node has a unique color. The color of the pixel under the touch point then identifies the node that was touched. The scene is then re-rendered in true colors in the same rendering pass, so the user never sees the unique-color rendering that was used to pick the node.</p>
<p>Once the node is picked, it is cached. On the next update pass, the node is picked up and all touch events that occured since the previous update pass are dispatched to the <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a> in sequence.</p>
<p>This asychronous design keeps the update and rendering loops from interfering with each other. The rendering loop only has to pick the object that is under the touch point that was most recently recorded. And if the dispatching of events takes time, only the update loop will be affected. The rendering loop can continue unhindered.</p>
<p>For rapid finger movements, it is quite likely that more than one touch event could arrive before the next rendering pass picks a 3D node. For this reason, no attempt is made to find the node for each and every touch location. In addition, the touch type is only added to the queue if it is different than the previous touch type. For example, a rapid inflow of kCCTouchMoved events will only result in a single kCCTouchMoved event being picked and dispatched to the <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a> on each pair of rendering and updating passes. </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab508673a7eb031f086af4eb48ddccb18"></a><!-- doxytag: member="CC3TouchedNodePicker::dispatchPickedNode" ref="ab508673a7eb031f086af4eb48ddccb18" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CC3TouchedNodePicker::dispatchPickedNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invoked by the <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a> during update operations, in the update loop that occurs occurs just after a touch event has been received by the touchEvent:at: method, and after a node has been picked as a result, by the pickTouchedNode method. </p>
<p>This implementation invokes the nodeSelected:byTouchEvent:at: method on the <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a> instance.</p>
<p>This method is invoked automatically whenever a touch event occurs. Usually, the application never needs to invoke this method directly. </p>

</div>
</div>
<a class="anchor" id="afed04c29fefce5008a2ddb4978eb5abc"></a><!-- doxytag: member="CC3TouchedNodePicker::handlerOnWorld:" ref="afed04c29fefce5008a2ddb4978eb5abc" args="(CC3World *aCC3World)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">id CC3TouchedNodePicker::handlerOnWorld: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_world.html">CC3World</a> *&#160;</td>
          <td class="paramname"><em>aCC3World</em></td><td>)</td>
          <td><code> [static, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocates and initializes an autoreleased instance on the specified <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a>. </p>

</div>
</div>
<a class="anchor" id="a3a93a9df33a4d8c344758fc025d06da3"></a><!-- doxytag: member="CC3TouchedNodePicker::initOnWorld:" ref="a3a93a9df33a4d8c344758fc025d06da3" args="(CC3World *aCC3World)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">id CC3TouchedNodePicker::initOnWorld: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_world.html">CC3World</a> *&#160;</td>
          <td class="paramname"><em>aCC3World</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes this instance on the specified <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a>. </p>

</div>
</div>
<a class="anchor" id="a040b6ca1a3ae0d127fef26b6df361494"></a><!-- doxytag: member="CC3TouchedNodePicker::pickNodeFromTouchEvent:at:" ref="a040b6ca1a3ae0d127fef26b6df361494" args="(uint tType,[at] CGPoint tPoint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CC3TouchedNodePicker::pickNodeFromTouchEvent:at: </td>
          <td>(</td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>tType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[at] CGPoint&#160;</td>
          <td class="paramname"><em>tPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates that a node should be picked for the touch event of the specified type that occurred at the specified point. </p>
<p>The tType is one of the enumerated touch types: kCCTouchBegan, kCCTouchMoved, kCCTouchEnded, or kCCTouchCancelled. The tPoint is the location in 2D coordinate system of the <a class="el" href="interface_c_c3_layer.html" title="CC3Layer is a cocos2d CCLayer that supports full 3D rendering in combination with normal cocos2d 2D r...">CC3Layer</a> where the touch occurred.</p>
<p>The event is queued internally, and the node is asychronously picked during the next rendering frame when the pickTouchedNode method is automatically invoked.</p>
<p>This method is invoked automatically whenever a touch event occurs. Usually, the application never needs to invoke this method directly. </p>

</div>
</div>
<a class="anchor" id="ade5bf0d7c783ffbc6467615ff5247960"></a><!-- doxytag: member="CC3TouchedNodePicker::pickTouchedNode" ref="ade5bf0d7c783ffbc6467615ff5247960" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CC3TouchedNodePicker::pickTouchedNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Invoked by the <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a> during drawing operations in the rendering frame that occurs just after a touch event has been received by the touchEvent:at: method. </p>
<p>The picking algorithm runs a specialized drawing routine that paints each node with a unique color. The algorithm then reads the color of the pixel under the touch point from the GL color buffer. The received color is then mapped back to the node that was painted with that color.</p>
<p>This specialized coloring algorithm is inserted into normal drawing operations when (and only when) a touch event has been received. Once the node has been picked, the drawing operations are re-run in normal fashion prior to the final posting of the frame to the display.</p>
<p>The coloring-and-picking algorithm is run only once per touch event, and is not run during rendering frames when there has been no touch event received.</p>
<p>This method is invoked automatically whenever a touch event occurs. Usually, the application never needs to invoke this method directly. </p>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="ac4af5ff92b7071d5518049625b49af97"></a><!-- doxytag: member="CC3TouchedNodePicker::glTouchPoint" ref="ac4af5ff92b7071d5518049625b49af97" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CGPoint CC3TouchedNodePicker::glTouchPoint<code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The most recent touch point in OpenGL ES coordinates. </p>

</div>
</div>
<a class="anchor" id="a68b7bb7337a946dbb46921123390e412"></a><!-- doxytag: member="CC3TouchedNodePicker::pickVisitor" ref="a68b7bb7337a946dbb46921123390e412" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_c_c3_node_picking_visitor.html">CC3NodePickingVisitor</a> * CC3TouchedNodePicker::pickVisitor<code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The visitor that is used to visit the nodes to draw them when picking a node from touch selection. </p>
<p>This property defaults to an instance of the class returned by the pickVisitorClass method of the <a class="el" href="interface_c_c3_world.html" title="CC3World is a CC3Node that manages a 3D scene.">CC3World</a>. The application can set a different visitor if desired. </p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li><a class="el" href="_c_c3_world_8h.html">CC3World.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interface_c_c3_touched_node_picker.html">CC3TouchedNodePicker</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Thu Nov 17 2011 18:52:11 for cocos3d by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5 </li>
   </ul>
 </div>


</body>
</html>
