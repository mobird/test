<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cocos3d: CC3SkinSection Interface Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">cocos3d
   &#160;<span id="projectnumber">0.6.3</span>
   </div>
   <div id="projectbrief">Cocos3D API Reference for <a href="http://www.kobold2d.com">Kobold2D</a> developers</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interface_c_c3_skin_section.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">CC3SkinSection Interface Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CC3SkinSection" -->
<p><code>#include &lt;CC3VertexSkinning.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CC3SkinSection:</div>
<div class="dyncontent">
<div class="center"><img src="interface_c_c3_skin_section__inherit__graph.png" border="0" usemap="#_c_c3_skin_section_inherit__map" alt="Inheritance graph"/></div>
<map name="_c_c3_skin_section_inherit__map" id="_c_c3_skin_section_inherit__map">
<area shape="rect" id="node3" href="interface_c_c3_p_o_d_skin_section.html" title="A CC3SkinSection extracted from a POD file." alt="" coords="5,83,141,111"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CC3SkinSection:</div>
<div class="dyncontent">
<div class="center"><img src="interface_c_c3_skin_section__coll__graph.png" border="0" usemap="#_c_c3_skin_section_coll__map" alt="Collaboration graph"/></div>
<map name="_c_c3_skin_section_coll__map" id="_c_c3_skin_section_coll__map">
<area shape="rect" id="node2" href="interface_c_c3_skin_mesh_node.html" title="CC3SkinMeshNode is a CC3MeshNode specialized to use vertex skinning to draw the contents of its mesh..." alt="" coords="58,339,187,367"/><area shape="rect" id="node4" href="interface_c_c3_mesh_node.html" title="A CC3Node that draws a 3D mesh." alt="" coords="71,259,175,287"/><area shape="rect" id="node6" href="interface_c_c3_local_content_node.html" title="CC3LocalContentNode is an abstract class that forms the basis for nodes that have local content to dr..." alt="" coords="49,179,196,207"/><area shape="rect" id="node8" href="interface_c_c3_node.html" title="CC3Node and its subclasses form the basis of all 3D artifacts in the 3D world, including visible mesh..." alt="" coords="85,99,159,127"/><area shape="rect" id="node10" href="interface_c_c3_identifiable.html" title="This is a base subclass for any class that uses tags or names to identify individual instances..." alt="" coords="5,6,112,34"/><area shape="rect" id="node12" href="interface_c_c3_g_l_matrix.html" title="A wrapper class for a 4x4 OpenGL matrix array." alt="" coords="137,6,236,34"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="interface_c_c3_skin_section-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#a8ae855aba601a53d71cf8afe83cebeea">addBone:</a> (<a class="el" href="interface_c_c3_bone.html">CC3Bone</a> *aNode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#ae0a611b052b907ff504eff00442a2219">copyForNode:</a> (<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *aNode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#a7a500a8f628fec9c627a672c7b160438">copyForNode:withZone:</a> (<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *aNode,[withZone] NSZone *zone)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#a4721de33c1fe494fdb727fa2ac71ac5d">drawVerticesOfMesh:withVisitor:</a> (<a class="el" href="interface_c_c3_mesh.html">CC3Mesh</a> *mesh,[withVisitor] <a class="el" href="interface_c_c3_node_drawing_visitor.html">CC3NodeDrawingVisitor</a> *visitor)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSString *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#acc9d7e810a443ce71185fb41ec845652">fullDescription</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#adc300baf4e640b0b0be83809adcccaf0">initForNode:</a> (<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *aNode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#a7656665c4b49109fccabd61d7b0fa780">reattachBonesFrom:</a> (<a class="el" href="interface_c_c3_node.html">CC3Node</a> *aNode)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">id&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#a04ee26e133776889f1173fe349f7c59d">boneBatchForNode:</a> (<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *aNode)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add71f008b9fcaf920416bca22a1217ff"></a><!-- doxytag: member="CC3SkinSection::node" ref="add71f008b9fcaf920416bca22a1217ff" args="" -->
<a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>node</b></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CCArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#afe9ce0b947cde02e64be11c69850965b">bones</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GLint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#a4150afbd80ae90843cdae7db752ff9cf">vertexCount</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GLint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_c_c3_skin_section.html#a508c79f705732a445f55fa3bcacfd106">vertexStart</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="interface_c_c3_skin_section.html" title="A CC3SkinSection defines a section of the skin mesh, and contains a collection of bones from the skel...">CC3SkinSection</a> defines a section of the skin mesh, and contains a collection of bones from the skeleton that influence the locations of the vertices in that section. </p>
<p>The skin section is expressed as a range of consecutive vertices from the mesh, as specified by the vertexStart and vertexCount properties. These properties define the first vertex of the section and the number of vertices in the section, respectively.</p>
<p>The skin section also contains a collection of bones that influence the vertices in the skin section. The bones are ordered in that collection such that the index of a bone in the collection corresponds to the index held for a vertex in the boneMatrixIndices vertex array of the <a class="el" href="interface_c_c3_skin_mesh.html" title="CC3SkinMesh is a CC3VertexArrayMesh that, in addition to the familiar vertex data such as locations...">CC3SkinMesh</a>.</p>
<p>Through the <a class="el" href="interface_c_c3_vertex_matrix_indices.html" title="A CC3VertexArray that manages a collection of indices used by each vertex to point to a collection of...">CC3VertexMatrixIndices</a> vertex array in the boneMatrixIndices property of the mesh, each vertex identifies several distinct indices into the bones collection of this skin section. The transform matrices from those bones are combined in a weighted fashion, and used to transform the location of the vertex. Each vertex defines its own set of weights through the <a class="el" href="interface_c_c3_vertex_weights.html" title="A CC3VertexArray that manages a collection of weights used by each vertex during vertex skinning...">CC3VertexWeights</a> vertex array in the boneWeights property of the mesh. </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8ae855aba601a53d71cf8afe83cebeea"></a><!-- doxytag: member="CC3SkinSection::addBone:" ref="a8ae855aba601a53d71cf8afe83cebeea" args="(CC3Bone *aNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CC3SkinSection::addBone: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_bone.html">CC3Bone</a> *&#160;</td>
          <td class="paramname"><em>aNode</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds the specified bone node to the collection of bones in the bones property. </p>
<p>See the notes for the bones property for more information about bones.</p>
<p>When the vertices are drawn, all of the vertices in this skin section are drawn with a single call to the GL engine. All of the bone transforms that affect any of the vertices being drawn are loaded into the GL engine by this skin section prior to drawing the vertices.</p>
<p>The number of transform matrices that can be simultaneously loaded into the GL engine matrix palette is limited by the platform, and that limit defines the maximum number of bones in the collection in this property. This platform limit can be retrieved from [<a class="el" href="interface_c_c3_open_g_l_e_s11_engine.html" title="CC3OpenGLES11Engine manages the state of the OpenGL ES 1.1.">CC3OpenGLES11Engine</a> engine].platform.maxPaletteMatrices.value. </p>

</div>
</div>
<a class="anchor" id="a04ee26e133776889f1173fe349f7c59d"></a><!-- doxytag: member="CC3SkinSection::boneBatchForNode:" ref="a04ee26e133776889f1173fe349f7c59d" args="(CC3SkinMeshNode *aNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">id CC3SkinSection::boneBatchForNode: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *&#160;</td>
          <td class="paramname"><em>aNode</em></td><td>)</td>
          <td><code> [static, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocates and initializes an autoreleased instance that will be used by the specified skin mesh node. </p>

</div>
</div>
<a class="anchor" id="ae0a611b052b907ff504eff00442a2219"></a><!-- doxytag: member="CC3SkinSection::copyForNode:" ref="ae0a611b052b907ff504eff00442a2219" args="(CC3SkinMeshNode *aNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">id CC3SkinSection::copyForNode: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *&#160;</td>
          <td class="paramname"><em>aNode</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a copy of this skin section, for use by the specified skin mesh node. </p>

</div>
</div>
<a class="anchor" id="a7a500a8f628fec9c627a672c7b160438"></a><!-- doxytag: member="CC3SkinSection::copyForNode:withZone:" ref="a7a500a8f628fec9c627a672c7b160438" args="(CC3SkinMeshNode *aNode,[withZone] NSZone *zone)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">id CC3SkinSection::copyForNode:withZone: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *&#160;</td>
          <td class="paramname"><em>aNode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[withZone] NSZone *&#160;</td>
          <td class="paramname"><em>zone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a copy of this skin section, for use by the specified skin mesh node. </p>

</div>
</div>
<a class="anchor" id="a4721de33c1fe494fdb727fa2ac71ac5d"></a><!-- doxytag: member="CC3SkinSection::drawVerticesOfMesh:withVisitor:" ref="a4721de33c1fe494fdb727fa2ac71ac5d" args="(CC3Mesh *mesh,[withVisitor] CC3NodeDrawingVisitor *visitor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CC3SkinSection::drawVerticesOfMesh:withVisitor: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_mesh.html">CC3Mesh</a> *&#160;</td>
          <td class="paramname"><em>mesh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[withVisitor] <a class="el" href="interface_c_c3_node_drawing_visitor.html">CC3NodeDrawingVisitor</a> *&#160;</td>
          <td class="paramname"><em>visitor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Draws the mesh vertices of this skin section. </p>
<p>Prior to drawing the vertices, this method iterates through the CC3Bones in the bones property, and loads a transform matrix into the GL matrix palette for each bone. During drawing, each vertex is then transformed by a weighted average of the transform matrices that it identifies as influencing its location.</p>
<p>The actual matrix loaded for each bone is derived from a combination of:</p>
<ul>
<li>the modelview matrix of the world (MV)</li>
<li>the transform of the bone (B), relative to the world</li>
<li>the inverse transform of rest pose of the bone (Br(-1)), relative to the world</li>
<li>the transform of the skin mesh node (M)</li>
</ul>
<p>as follows, with * representing matrix multiplication:</p>
<p>MV * B * Br(-1) * M</p>
<p>In practice, to avoid calculating the inverse transform for the rest pose of each bone on every frame render, we can separate each of the rest pose of the bone and the skin mesh node into two components: the transform of the <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a>, relative to the world, and the transform of the bone and skin mesh node relative to the <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a>. The above matrix calculation can be expanded and then reduced as follows, with:</p>
<ul>
<li>the modelview matrix of the world (MV)</li>
<li>the transform of the bone (B)</li>
<li>the transform of the Soft-body node (SB), and its inverse (SB(-1))</li>
<li>the transform of the rest pose of the bone relative to the soft-body node (Brsb), and its inverse (Brsb(-1))</li>
<li>the transform of the skin mesh node relative to the soft-body node (Msb)</li>
</ul>
<p>MV * B * Br(-1) * M MV * B * (SB * Brsb)(-1) * (SB * Msb) MV * B * Brsb(-1) * SB(-1) * SB * Msb MV * B * Brsb(-1) * (SB(-1) * SB) * Msb MV * B * Brsb(-1) * Msb</p>
<p>The result is dependent only on the inverted rest pose of the bone relative to the soft-body node, and the skin mesh node, also relative to the soft-body node. In practice, neither of these parameters should change as the character moves.</p>
<p>Since the two cached matrices are relative to the soft-body node, we can move the soft-body node around, and transform it, without having to recalculate the inverse rest pose matrix on each movement for each bone. The movement of the soft-body node and the bones are the only factors that need to be rebuilt on each update.</p>
<p>We can capture the inverse rest pose transform of the bone relative to the soft-body node once and cache it. If we make the assumption that the transform of the skin mesh node, relative to the soft-body node will not change (a fairly safe assumption since it would affect the alignment of the bones to the mesh vertices), we can determine it once and cache it as well. This caching is handled by the bindRestPose method on the respective <a class="el" href="interface_c_c3_bone.html" title="CC3Bone is the building block of skeletons that control the deformation of a skin mesh...">CC3Bone</a> and <a class="el" href="interface_c_c3_skin_mesh_node.html" title="CC3SkinMeshNode is a CC3MeshNode specialized to use vertex skinning to draw the contents of its mesh...">CC3SkinMeshNode</a> nodes.</p>
<p>This arrangement also has the benefit of avoiding artifacts that sometimes appear in the matrix inversion of the full bone and skin transforms if the <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a> is set at rotations of exactly 90 degrees (the cosine of the angle is zero).</p>
<p>This method is invoked automatically when a <a class="el" href="interface_c_c3_skin_mesh_node.html" title="CC3SkinMeshNode is a CC3MeshNode specialized to use vertex skinning to draw the contents of its mesh...">CC3SkinMeshNode</a> is drawn. Usually, the application never needs to invoke this method directly. </p>

</div>
</div>
<a class="anchor" id="acc9d7e810a443ce71185fb41ec845652"></a><!-- doxytag: member="CC3SkinSection::fullDescription" ref="acc9d7e810a443ce71185fb41ec845652" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NSString* CC3SkinSection::fullDescription </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a description of this skin section that includes a list of the bones. </p>

</div>
</div>
<a class="anchor" id="adc300baf4e640b0b0be83809adcccaf0"></a><!-- doxytag: member="CC3SkinSection::initForNode:" ref="adc300baf4e640b0b0be83809adcccaf0" args="(CC3SkinMeshNode *aNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">id CC3SkinSection::initForNode: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_skin_mesh_node.html">CC3SkinMeshNode</a> *&#160;</td>
          <td class="paramname"><em>aNode</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes an instance that will be used by the specified skin mesh node. </p>

</div>
</div>
<a class="anchor" id="a7656665c4b49109fccabd61d7b0fa780"></a><!-- doxytag: member="CC3SkinSection::reattachBonesFrom:" ref="a7656665c4b49109fccabd61d7b0fa780" args="(CC3Node *aNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CC3SkinSection::reattachBonesFrom: </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_c_c3_node.html">CC3Node</a> *&#160;</td>
          <td class="paramname"><em>aNode</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creating a copy of a skin section is typically done as part of creating a copy of a skin mesh node. </p>
<p>After copying, the newly created copy will still be influenced by the original skeleton. The result is that both the original mesh and the copy will move and be deformed in tandem as the skeleton moves.</p>
<p>If you are creating a chorus line of dancing characters, this may be the effect you are after. However, if you are creating a squadron of similar, but independently moving characters, each skin mesh node copy should be controlled by a separate skeleton.</p>
<p>After creating a copy of the skeleton bone node assembly, you can use this method to attach the skin mesh node to the new skeleton. The node that is provided as the argument to this method is the root bone node of the skeleton, or a structural ancestor of the skeleton that does not also include the original skeleton as a descendant.</p>
<p>This method iterates through all the bones referenced by this skin section, and retrieves a bone with the same name from the structural descendants of the specified node.</p>
<p>Typically, you would not invoke this method on the skin section directly. Instead, you would invoke a similar method on the <a class="el" href="interface_c_c3_skin_mesh_node.html" title="CC3SkinMeshNode is a CC3MeshNode specialized to use vertex skinning to draw the contents of its mesh...">CC3SkinMeshNode</a>, or one of its structural ancestors.</p>
<p>When copying a <a class="el" href="interface_c_c3_soft_body_node.html" title="CC3SoftBodyNode is the primary structural component for a soft-body object that uses vertex skinning ...">CC3SoftBodyNode</a> instance, this method is automatically invoked as part of the copying of the soft-body object, and you do not need to invoke this method directly. </p>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="afe9ce0b947cde02e64be11c69850965b"></a><!-- doxytag: member="CC3SkinSection::bones" ref="afe9ce0b947cde02e64be11c69850965b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CCArray * CC3SkinSection::bones<code> [read, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The collection of bones from the skeleton that influence the subset of mesh vertices that is managed and drawn by this batch. </p>
<p>Each vertex holds a set of indices into this array, to identify the bones that contribute to the transforming of that vertex. The contribution that each bone makes is weighted by the corresponding weights held by the vertex.</p>
<p>Any particular vertex will typically only be directly influenced by two or three bones. The maximum number of bones that any vertex can be directly influenced by is determined by the number of vertex units supported by the platform. This limit can be retreived from [<a class="el" href="interface_c_c3_open_g_l_e_s11_engine.html" title="CC3OpenGLES11Engine manages the state of the OpenGL ES 1.1.">CC3OpenGLES11Engine</a> engine].platform.maxVertexUnits.value.</p>
<p>Because different vertices of the skin section may be influenced by different combinations of bones, the number of bones in the collection in this property will generally be larger than the number of bones used per vertex.</p>
<p>However, when the vertices are drawn, all of the vertices in this skin section are drawn with a single call to the GL engine. All of the bone transforms that affect any of the vertices being drawn are loaded into the GL engine by this skin section prior to drawing the vertices.</p>
<p>The number of transform matrices that can be simultaneously loaded into the GL engine matrix palette is limited by the platform, and that limit defines the maximum number of bones in the collection in this property. This platform limit can be retrieved from [<a class="el" href="interface_c_c3_open_g_l_e_s11_engine.html" title="CC3OpenGLES11Engine manages the state of the OpenGL ES 1.1.">CC3OpenGLES11Engine</a> engine].platform.maxPaletteMatrices.value. </p>

</div>
</div>
<a class="anchor" id="a4150afbd80ae90843cdae7db752ff9cf"></a><!-- doxytag: member="CC3SkinSection::vertexCount" ref="a4150afbd80ae90843cdae7db752ff9cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GLint CC3SkinSection::vertexCount<code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates the number of vertices in this skin section. </p>
<p>This value is a count of the nubmer of vertices, not of the number of underlying primitives (floats or bytes).</p>
<p>For example, if a mesh has ten vertices, the value of this property can be set to some value between zero and ten, even though each of the vertices contains several components of data (locations, normals, texture coordinates, bone indices and bone weights, making the actual array much longer than ten, in terms of primatives or bytes) </p>

</div>
</div>
<a class="anchor" id="a508c79f705732a445f55fa3bcacfd106"></a><!-- doxytag: member="CC3SkinSection::vertexStart" ref="a508c79f705732a445f55fa3bcacfd106" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GLint CC3SkinSection::vertexStart<code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An index that indicates which vertex in the mesh begins this skin section. </p>
<p>This value is an index of vertices, not of the underlying primitives (floats or bytes).</p>
<p>For example, if a mesh has ten vertices, the value of this property can be set to some value between zero and ten, even though each of the vertices contains several components of data (locations, normals, texture coordinates, bone indices and bone weights, making the actual array much longer than ten, in terms of primatives or bytes) </p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li><a class="el" href="_c_c3_vertex_skinning_8h.html">CC3VertexSkinning.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interface_c_c3_skin_section.html">CC3SkinSection</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Thu Nov 17 2011 18:52:11 for cocos3d by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5 </li>
   </ul>
 </div>


</body>
</html>
